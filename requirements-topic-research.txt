# Universal Topic Research Agent - Core Dependencies
# =================================================
# MVP Stack - Simple, battle-tested libraries

# RSS & Feed Management
feedparser==6.0.11                # Plug-and-play RSS/Atom parser, no API key
feedfinder2==0.0.4                # Auto-detect RSS/Atom links from URLs
trafilatura==1.12.1               # PRIMARY: Article extraction, all languages
newspaper3k==0.2.8                # FALLBACK: Article extraction (use when trafilatura fails)

# Reddit API
praw==7.7.1                       # Official Reddit API wrapper

# News APIs (OPTIONAL - RSS feeds are primary)
# RECOMMENDED OPTION: thenewsapi-python (if package exists) or use httpx
# - TheNewsAPI.com: 100 req/day FREE (300 articles, real-time, production OK)
# - Paid: $19/month for 2,500 req/day (75K articles/month)
# - Superior to NewsAPI.org: No 24hr delay, production allowed, cheaper
#
# NOT RECOMMENDED:
# newsapi-python==0.2.7           # 24hr delay, dev only, $449/month
# mediastack                       # Only 16 req/day free
#
# Note: RSS feeds from awesome-rss-feeds provide 500+ unlimited feeds (PRIMARY)

# Google Trends (✅ MIGRATED to Gemini CLI - Nov 2025)
# pytrends==4.9.2                 # REMOVED: Archived April 2025, no longer maintained
# trendspy==0.1.6                 # SKIPPED: Still rate limited by Google
#
# ✅ NOW USING: Gemini CLI (FREE, UNLIMITED, RELIABLE)
# - Install: npm install -g @google/generative-ai-cli
# - Requires: GEMINI_API_KEY environment variable
# - Benefits: No rate limits, real-time data, official Google API
# - Implementation: TrendsCollector uses subprocess to call gemini CLI
# - See: src/collectors/trends_collector.py (Gemini CLI backend)

# SEO & Keywords
advertools==0.14.2                # Sitemap crawling, SERP analysis, no API key

# Search & Discovery (Intelligent Feed Discovery)
duckduckgo-search==6.3.5          # FREE SERP for automatic competitor discovery
# Used for: Keyword→SERP→Domains→Feeds (zero manual input!)

# LLM-First NLP Strategy (Replaces 5GB!)
# ====================================
# qwen-turbo (7B) via OpenRouter handles ALL NLP tasks:
# - Language detection (context-aware, mixed-language)
# - Topic clustering (semantic understanding)
# - Entity extraction (multilingual, zero setup)
# - Keyword extraction (context-aware)
# - Cross-domain expansion (intelligent discovery)
#
# Economics: $0.06/1M tokens = $0.003/month for MVP
# Setup: Zero downloads, instant start
openai==1.54.0                    # OpenRouter client for qwen-turbo
# Usage: base_url="https://openrouter.ai/api/v1"
# Model: "qwen/qwen-2.5-7b-instruct"
#
# ❌ REMOVED (5GB saved!):
# - fasttext-wheel==0.9.2 (1GB) → qwen-turbo language detection
# - bertopic==0.16.3 (500MB) → qwen-turbo clustering
# - sentence-transformers==2.7.0 (2GB) → qwen-turbo embeddings
# - spacy==3.7.5 (500MB/lang) → qwen-turbo NER

# Deduplication
datasketch==1.6.4                 # MinHash/LSH for near-duplicate detection

# Topic Clustering (TF-IDF + HDBSCAN)
scikit-learn==1.6.1               # TF-IDF vectorization for text features
hdbscan==0.8.40                   # Density-based clustering (auto-determines K)

# Rate Limiting & Retries
tenacity==8.5.0                   # Retry with exponential backoff
aiolimiter==1.1.0                 # Async rate limiting (60 req/min, etc.)

# Job Scheduling
huey==2.5.0                       # RECOMMENDED: Lightweight task queue (SQLite-based, no Redis!)
# Production upgrade: Add redis==5.2.1 for distributed workers

# OPML Support
opyml==0.1.2                      # OPML parser for feed lists

# Observability
structlog==24.4.0                 # Structured logging with context

# Deep Research (LLM-powered)
gpt-researcher==0.14.4            # Deep research with citations, thin wrapper pattern
# Note: Requires OPENAI_API_KEY or other LLM provider

# Database
# sqlite3 is built-in to Python
# Production: psycopg[binary]==3.2.1  # Postgres driver
# Production: pgvector==0.3.0         # Vector similarity search

# Notion Integration
notion-client==2.2.1              # Official Notion API client

# Utilities
pydantic==2.9.1                   # Data validation and settings
pyyaml==6.0.2                     # YAML config parsing
httpx==0.27.0                     # Async HTTP client
python-dotenv==1.0.1              # Environment variable management

# Web UI (Optional)
streamlit==1.39.0                 # Simple web UI for topic review
plotly==5.24.1                    # Interactive charts for analytics

# Testing & Development
pytest==8.3.3
pytest-asyncio==0.24.0
pytest-cov==6.0.0
pytest-rerunfailures==15.0        # Retry flaky tests (external APIs)
# Usage: pytest -m "external_api" --reruns 2 --reruns-delay 60

# Code Quality
ruff==0.7.2                       # Fast Python linter

# Additional Integrations (Optional)
# seo-keyword-research-tool: Clone from https://github.com/chukhraiartur/seo-keyword-research-tool
# RSSHub: Self-host or use public instance at https://rsshub.app
